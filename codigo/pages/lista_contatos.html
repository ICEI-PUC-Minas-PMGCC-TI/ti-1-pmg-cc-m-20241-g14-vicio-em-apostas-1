<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Cadastro de Contatos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

</head>

<body style="background-color:black;">
    <header id="cabecalho">
        <img src="OIG3__1_-removebg-preview.png" class="logo" alt="Logo">
        <h2 style="color: white;">Seu diagnóstico</h2>
        <h4 style="color: white;">Por favor considere também sempre buscar ajuda profissional</h4>
        <a href="index.html"><input type="button" class="btn btn-outline-warning right-corner-button" id="btnClear"
                value="Voltar"></a>
    </header>
    <div class="container mt-5">
        <h2 class="text-center mb-4">Leve</h2>
        <div class="text-justify" class="conteudo">
            <h5>
                O vício em apostas pode começar de maneira sutil, muitas vezes passando despercebido até que se torne um
                problema maior. Se você percebe que está apostando mais do que deveria ou que isso está afetando outros
                aspectos da sua vida, é importante tomar medidas para controlar esse hábito.<br><br>

                Apostar pode ser uma forma de entretenimento, mas deve ser feito com responsabilidade. Defina limites
                claros para o tempo e o dinheiro que você gasta com apostas. Mantenha um diário de suas apostas para ter
                uma visão clara de quanto está investindo e procure alternativas saudáveis para ocupar seu tempo, como
                hobbies, exercícios físicos ou atividades sociais.<br><br>

                Lembre-se, é fundamental buscar apoio se sentir que está perdendo o controle. Conversar com amigos,
                familiares ou até mesmo procurar ajuda profissional pode ser um passo importante para garantir que o
                hábito de apostar não se torne um problema sério. Mantenha o equilíbrio e aposte com responsabilidade!<br><br>
            </h5>
        </div>
    </div>
    <div class="container mt-5">
        <h2 class="text-center mb-4">Intermediário</h2>
        <div class="text-justify" class="conteudo">
            <h5>
                Se você está em um estágio intermediário de vício em apostas, pode ser que já tenha percebido algumas
                consequências negativas em sua vida. Talvez tenha começado a esconder suas apostas dos outros, gastando
                mais tempo e dinheiro do que pretendia, ou mesmo se endividando.<br><br>

                Neste ponto, é crucial reconhecer que o vício em apostas é um problema sério que precisa ser abordado.
                Aqui estão algumas estratégias para ajudar a gerenciar esse vício:<br><br>

                Estabeleça Limites Rígidos: Defina um orçamento claro para suas apostas e nunca ultrapasse esse limite.
                Use apenas dinheiro que você pode perder sem causar prejuízo financeiro.<br><br>

                Desenvolva Alternativas: Encontre outras atividades que você goste e que possam ocupar seu tempo de
                maneira produtiva. Exercícios físicos, hobbies criativos, e socialização com amigos e familiares podem
                ajudar a reduzir o tempo que você dedica às apostas.<br><br>

                Autocontrole e Conscientização: Mantenha um diário de suas apostas para monitorar seus comportamentos.
                Esteja ciente de como, quando e por que você aposta, para identificar gatilhos e situações de risco.<br><br>

                Procure Apoio: Não enfrente isso sozinho. Conversar com amigos e familiares sobre seu problema pode
                aliviar o peso emocional. Considerar a ajuda de um terapeuta especializado em vícios pode ser
                extremamente benéfico.<br><br>

                Exclua-se de Plataformas de Apostas: Muitas plataformas de apostas oferecem opções de autoexclusão,
                permitindo que você se proíba de fazer apostas por um período de tempo específico.<br><br>

                Lidar com um vício em apostas não é fácil, mas com determinação e as estratégias certas, você pode
                retomar o controle sobre sua vida. Lembre-se de que pedir ajuda não é um sinal de fraqueza, mas sim um
                passo importante para a recuperação.<br><br>
            </h5>
        </div>
    </div>
    <div class="container mt-5">
        <h2 class="text-center mb-4">Grave</h2>
        <div class="text-justify" class="conteudo">
            <h5>
                Se você está em um estágio grave de vício em apostas, os impactos em sua vida podem ser profundos e
                debilitantes. É possível que você esteja enfrentando sérios problemas financeiros, conflitos familiares,
                e uma deterioração em sua saúde mental e física.<br>

                Neste ponto, é essencial tomar medidas imediatas e drásticas para combater o vício:<br><br>

                <strong style="font-size: larger;">Procure Ajuda Profissional Imediatamente:</strong> Terapia especializada em vícios é vital. Psicólogos,
                psiquiatras, e conselheiros de vícios podem fornecer suporte e estratégias de tratamento adequadas. Em
                alguns casos, medicamentos podem ser prescritos para ajudar a controlar os impulsos.<br><br>

                Participe de Grupos de Apoio: Grupos como Jogadores Anônimos (GA) oferecem um ambiente seguro para
                compartilhar experiências e obter apoio de pessoas que enfrentam desafios semelhantes. A comunidade pode
                ser uma fonte poderosa de motivação e solidariedade.<br><br>

                Estabeleça Barreiras Financeiras: Peça a alguém de confiança para gerenciar suas finanças. Implemente
                medidas para limitar seu acesso ao dinheiro, como cancelar cartões de crédito ou estabelecer contas com
                restrições.<br><br>

                Autoexclusão e Bloqueio de Sites de Apostas: Utilize programas e serviços que bloqueiem seu acesso a
                sites de apostas. Autoexclusão é uma ferramenta eficaz para impedir que você ceda à tentação de apostar.<br><br>

                Desenvolva um Plano de Recuperação: Trabalhe com um profissional para criar um plano de recuperação
                personalizado. Este plano deve incluir metas a curto e longo prazo, estratégias de enfrentamento, e
                atividades alternativas para substituir as apostas.<br><br>

                Reconstrua Relações e Rede de Suporte: O vício em apostas pode ter danificado relações pessoais. Dedique
                tempo para reparar esses relacionamentos e construir uma rede de apoio sólida.<br><br>

                Lutar contra um vício em apostas em estágio grave é um desafio monumental, mas com determinação, apoio
                adequado, e um plano de ação estruturado, é possível superar. Nunca é tarde demais para buscar ajuda e
                fazer mudanças positivas em sua vida. Lembre-se de que cada passo, por menor que seja, é um avanço em
                direção à recuperação.<br><br>
            </h5>
        </div>
    </div>
    <div class="container">
        <div class="row">
            <div id="msg" class="col-sm-10 offset-sm-1 ">
                <!--<div class="alert alert-warning">Contato não encontrado.</div>-->
            </div>
        </div>
        <h2 style="color: white;">Pesquisa de Psicólogos</h2>
        <h4 style="color: white;">Encontre sua Clínica!</h4>
        <div class="row">
            <div id="msg" class="col-sm-2 offset-sm-10 ">

            </div>
        </div>

        <div class="row">
            <div class="col-sm-12">
                <table id="grid-contatos" class="table table-striped" style="color: white;">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Nome</th>
                            <th scope="col">Telefone</th>
                            <th scope="col">E-mail</th>
                            <th scope="col">Cidade</th>
                            <th scope="col">Região</th>
                            <th scope="col">Mapa</th>
                        </tr>
                    </thead>
                    <tbody id="table-contatos">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        let mapInstances = {};
        //uso do nominatim pra triangular o cep em coordenadas
        function geocodeCep(cep, callback) {
            const url = `https://nominatim.openstreetmap.org/search?format=json&postalcode=${encodeURIComponent(cep)}&country=Brazil`;

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    if (data && data.length > 0) {
                        const coordinates = [data[0].lat, data[0].lon];
                        callback(null, coordinates);
                    } else {
                        callback('Nenhum resultado encontrado');
                    }
                })
                .catch(error => callback(error));
        }
        //funçao pra ligar e desligar o mapa
        function toggleMap(rowId, cep, popupText) {
            const mapRow = document.getElementById(`map-row-${rowId}`);
            const mapContainer = document.getElementById(`map-${rowId}`);

            if (mapRow.style.display === 'table-row') {
                mapRow.style.display = 'none';
            } else {
                mapRow.style.display = 'table-row';

                if (!mapInstances[rowId]) {
                    const map = L.map(mapContainer).setView([-19.912998, -43.940933], 13);
                    const markers = []; // array para armazenar as coordenadas dos marcadores

                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                    }).addTo(map);

                    // geocodifica o CEP específico e adiciona o marcador ao mapa
                    geocodeCep(cep, function (error, coordinates) {
                        if (!error) {
                            markers.push(coordinates); // adiciona as coordenadas ao array de marcadores
                            L.marker(coordinates).addTo(map)
                                .bindPopup(`<b>${popupText}</b><br><b>CEP:</b> ${cep}`)
                                .openPopup();

                            // calcula o centro dos marcadores
                            const bounds = L.latLngBounds(markers);
                            map.fitBounds(bounds); // Ajusta a visualização do mapa para conter todos os marcadores
                        } else {
                            console.error('Erro de geocodificação:', error);
                        }
                    });

                    mapInstances[rowId] = map;
                } else {
                    mapInstances[rowId].invalidateSize();
                }
            }
        }
        //preenche a tabela
        fetch('http://localhost:3000/psicologos')
            .then(response => response.json())
            .then(data => {
                const tableBody = document.getElementById('table-contatos');
                data.forEach((contact, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${contact.nome}</td>
                        <td>${contact.telefone}</td>
                        <td>${contact.email}</td>
                        <td>${contact.cidade}</td>
                        <td>${contact.regiao}</td>
                        <td><button class="btn btn-outline-primary" onclick="toggleMap(${index}, '${contact.cep}', '${contact.popup}')">Mapa</button></td>
                    `;
                    tableBody.appendChild(row);

                    const mapRow = document.createElement('tr');
                    mapRow.id = `map-row-${index}`;
                    mapRow.style.display = 'none';
                    mapRow.innerHTML = `
                        <td colspan="7"><div id="map-${index}" style="height: 300px;"></div></td>
                    `;
                    tableBody.appendChild(mapRow);
                });
            })
            .catch(error => console.error('Erro ao buscar os dados JSON:', error));
    </script>
</body>

</html>